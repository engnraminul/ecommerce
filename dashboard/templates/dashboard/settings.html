{% extends 'dashboard/base.html' %}

{% block title %}Settings - MB Admin{% endblock %}

{% block page_title %}Store Settings{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-md-3">
        <div class="card">
            <div class="card-header">
                <h6 class="mb-0">Settings Navigation</h6>
            </div>
            <div class="card-body p-0">
                <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                    <button class="nav-link text-start active" id="general-tab" data-bs-toggle="pill" data-bs-target="#general" type="button" role="tab" aria-selected="true">
                        <i class="fas fa-cog fa-fw me-2"></i> General
                    </button>
                    <button class="nav-link text-start" id="shipping-tab" data-bs-toggle="pill" data-bs-target="#shipping" type="button" role="tab" aria-selected="false">
                        <i class="fas fa-truck fa-fw me-2"></i> Shipping
                    </button>
                    <button class="nav-link text-start" id="payment-tab" data-bs-toggle="pill" data-bs-target="#payment" type="button" role="tab" aria-selected="false">
                        <i class="fas fa-credit-card fa-fw me-2"></i> Payment
                    </button>
                    <button class="nav-link text-start" id="tax-tab" data-bs-toggle="pill" data-bs-target="#tax" type="button" role="tab" aria-selected="false">
                        <i class="fas fa-percentage fa-fw me-2"></i> Tax
                    </button>
                    <button class="nav-link text-start" id="email-tab" data-bs-toggle="pill" data-bs-target="#email" type="button" role="tab" aria-selected="false">
                        <i class="fas fa-envelope fa-fw me-2"></i> Email
                    </button>
                    <button class="nav-link text-start" id="appearance-tab" data-bs-toggle="pill" data-bs-target="#appearance" type="button" role="tab" aria-selected="false">
                        <i class="fas fa-palette fa-fw me-2"></i> Appearance
                    </button>
                    <button class="nav-link text-start" id="advanced-tab" data-bs-toggle="pill" data-bs-target="#advanced" type="button" role="tab" aria-selected="false">
                        <i class="fas fa-tools fa-fw me-2"></i> Advanced
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-9">
        <div class="card">
            <div class="card-body">
                <div class="tab-content" id="v-pills-tabContent">
                    <!-- General Settings -->
                    <div class="tab-pane fade show active" id="general" role="tabpanel" aria-labelledby="general-tab">
                        <h5 class="mb-4">General Settings</h5>
                        <form id="generalSettingsForm">
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="storeName" class="form-label">Store Name</label>
                                    <input type="text" class="form-control" id="storeName" name="store_name" value="My Brand Store">
                                </div>
                                <div class="col-md-6">
                                    <label for="storeEmail" class="form-label">Store Email</label>
                                    <input type="email" class="form-control" id="storeEmail" name="store_email" value="contact@mybrandstore.com">
                                </div>
                            </div>
                            
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="storePhone" class="form-label">Store Phone</label>
                                    <input type="tel" class="form-control" id="storePhone" name="store_phone" value="+1 123-456-7890">
                                </div>
                                <div class="col-md-6">
                                    <label for="storeCurrency" class="form-label">Currency</label>
                                    <select class="form-select" id="storeCurrency" name="store_currency">
                                        <option value="USD" selected>USD - US Dollar</option>
                                        <option value="EUR">EUR - Euro</option>
                                        <option value="GBP">GBP - British Pound</option>
                                        <option value="CAD">CAD - Canadian Dollar</option>
                                        <option value="AUD">AUD - Australian Dollar</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="storeAddress" class="form-label">Store Address</label>
                                <textarea class="form-control" id="storeAddress" name="store_address" rows="3">123 Main Street, City, State 12345, Country</textarea>
                            </div>
                            
                            <div class="mb-3">
                                <label for="storeDescription" class="form-label">Store Description</label>
                                <textarea class="form-control" id="storeDescription" name="store_description" rows="3">Your one-stop shop for quality products.</textarea>
                            </div>
                            
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <label for="timeZone" class="form-label">Time Zone</label>
                                    <select class="form-select" id="timeZone" name="time_zone">
                                        <option value="UTC" selected>UTC</option>
                                        <option value="America/New_York">Eastern Time (ET)</option>
                                        <option value="America/Chicago">Central Time (CT)</option>
                                        <option value="America/Denver">Mountain Time (MT)</option>
                                        <option value="America/Los_Angeles">Pacific Time (PT)</option>
                                        <option value="Europe/London">London (GMT)</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="dateFormat" class="form-label">Date Format</label>
                                    <select class="form-select" id="dateFormat" name="date_format">
                                        <option value="MM/DD/YYYY" selected>MM/DD/YYYY</option>
                                        <option value="DD/MM/YYYY">DD/MM/YYYY</option>
                                        <option value="YYYY-MM-DD">YYYY-MM-DD</option>
                                    </select>
                                </div>
                            </div>
                            
                            <button type="button" class="btn btn-primary" id="saveGeneralSettingsBtn">
                                <i class="fas fa-save me-1"></i> Save General Settings
                            </button>
                        </form>
                    </div>
                    
                    <!-- Shipping Settings -->
                    <div class="tab-pane fade" id="shipping" role="tabpanel" aria-labelledby="shipping-tab">
                        <h5 class="mb-4">Shipping Settings</h5>
                        <form id="shippingSettingsForm">
                            <div class="mb-3 form-check">
                                <input class="form-check-input" type="checkbox" id="enableShipping" name="enable_shipping" checked>
                                <label class="form-check-label" for="enableShipping">
                                    Enable Shipping
                                </label>
                            </div>
                            
                            <div class="mb-4">
                                <label class="form-label">Shipping Zones</label>
                                <div class="table-responsive">
                                    <table class="table table-bordered table-sm" id="shippingZonesTable">
                                        <thead>
                                            <tr>
                                                <th>Zone Name</th>
                                                <th>Countries</th>
                                                <th>Base Cost</th>
                                                <th>Free Shipping Over</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Domestic</td>
                                                <td>United States</td>
                                                <td>$5.00</td>
                                                <td>$50.00</td>
                                                <td>
                                                    <button type="button" class="btn btn-sm btn-outline-primary edit-zone-btn" data-zone-id="1">
                                                        <i class="fas fa-edit"></i>
                                                    </button>
                                                    <button type="button" class="btn btn-sm btn-outline-danger delete-zone-btn" data-zone-id="1">
                                                        <i class="fas fa-trash-alt"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>International</td>
                                                <td>Rest of the World</td>
                                                <td>$15.00</td>
                                                <td>$100.00</td>
                                                <td>
                                                    <button type="button" class="btn btn-sm btn-outline-primary edit-zone-btn" data-zone-id="2">
                                                        <i class="fas fa-edit"></i>
                                                    </button>
                                                    <button type="button" class="btn btn-sm btn-outline-danger delete-zone-btn" data-zone-id="2">
                                                        <i class="fas fa-trash-alt"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <button type="button" class="btn btn-sm btn-success" id="addShippingZoneBtn">
                                    <i class="fas fa-plus-circle me-1"></i> Add Shipping Zone
                                </button>
                            </div>
                            
                            <div class="mb-4">
                                <label class="form-label">Shipping Methods</label>
                                <div class="table-responsive">
                                    <table class="table table-bordered table-sm" id="shippingMethodsTable">
                                        <thead>
                                            <tr>
                                                <th>Method Name</th>
                                                <th>Description</th>
                                                <th>Cost Modifier</th>
                                                <th>Status</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Standard Shipping</td>
                                                <td>5-7 business days</td>
                                                <td>+$0.00</td>
                                                <td><span class="badge bg-success">Active</span></td>
                                                <td>
                                                    <button type="button" class="btn btn-sm btn-outline-primary edit-method-btn" data-method-id="1">
                                                        <i class="fas fa-edit"></i>
                                                    </button>
                                                    <button type="button" class="btn btn-sm btn-outline-danger delete-method-btn" data-method-id="1">
                                                        <i class="fas fa-trash-alt"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Express Shipping</td>
                                                <td>2-3 business days</td>
                                                <td>+$10.00</td>
                                                <td><span class="badge bg-success">Active</span></td>
                                                <td>
                                                    <button type="button" class="btn btn-sm btn-outline-primary edit-method-btn" data-method-id="2">
                                                        <i class="fas fa-edit"></i>
                                                    </button>
                                                    <button type="button" class="btn btn-sm btn-outline-danger delete-method-btn" data-method-id="2">
                                                        <i class="fas fa-trash-alt"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <button type="button" class="btn btn-sm btn-success" id="addShippingMethodBtn">
                                    <i class="fas fa-plus-circle me-1"></i> Add Shipping Method
                                </button>
                            </div>
                            
                            <button type="button" class="btn btn-primary" id="saveShippingSettingsBtn">
                                <i class="fas fa-save me-1"></i> Save Shipping Settings
                            </button>
                        </form>
                    </div>
                    
                    <!-- Payment Settings -->
                    <div class="tab-pane fade" id="payment" role="tabpanel" aria-labelledby="payment-tab">
                        <h5 class="mb-4">Payment Settings</h5>
                        <form id="paymentSettingsForm">
                            <div class="mb-4">
                                <h6 class="mb-3">Payment Gateways</h6>
                                
                                <!-- Stripe -->
                                <div class="card mb-3">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="stripeEnabled" name="stripe_enabled" checked>
                                            <label class="form-check-label" for="stripeEnabled">
                                                <img src="https://upload.wikimedia.org/wikipedia/commons/b/ba/Stripe_Logo%2C_revised_2016.svg" alt="Stripe" height="25">
                                                Stripe
                                            </label>
                                        </div>
                                        <button class="btn btn-sm btn-link" type="button" data-bs-toggle="collapse" data-bs-target="#stripeSettings">
                                            <i class="fas fa-cog"></i> Configure
                                        </button>
                                    </div>
                                    <div class="collapse" id="stripeSettings">
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <label for="stripePublicKey" class="form-label">Public Key</label>
                                                <input type="text" class="form-control" id="stripePublicKey" name="stripe_public_key" value="pk_test_example">
                                            </div>
                                            <div class="mb-3">
                                                <label for="stripeSecretKey" class="form-label">Secret Key</label>
                                                <input type="password" class="form-control" id="stripeSecretKey" name="stripe_secret_key" value="sk_test_example">
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="stripeTestMode" name="stripe_test_mode" checked>
                                                <label class="form-check-label" for="stripeTestMode">
                                                    Test Mode
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- PayPal -->
                                <div class="card mb-3">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="paypalEnabled" name="paypal_enabled">
                                            <label class="form-check-label" for="paypalEnabled">
                                                <img src="https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg" alt="PayPal" height="25">
                                                PayPal
                                            </label>
                                        </div>
                                        <button class="btn btn-sm btn-link" type="button" data-bs-toggle="collapse" data-bs-target="#paypalSettings">
                                            <i class="fas fa-cog"></i> Configure
                                        </button>
                                    </div>
                                    <div class="collapse" id="paypalSettings">
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <label for="paypalClientId" class="form-label">Client ID</label>
                                                <input type="text" class="form-control" id="paypalClientId" name="paypal_client_id">
                                            </div>
                                            <div class="mb-3">
                                                <label for="paypalSecretKey" class="form-label">Secret Key</label>
                                                <input type="password" class="form-control" id="paypalSecretKey" name="paypal_secret_key">
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="paypalTestMode" name="paypal_test_mode" checked>
                                                <label class="form-check-label" for="paypalTestMode">
                                                    Test Mode
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Cash on Delivery -->
                                <div class="card mb-3">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="codEnabled" name="cod_enabled" checked>
                                            <label class="form-check-label" for="codEnabled">
                                                <i class="fas fa-money-bill-wave me-2"></i>
                                                Cash on Delivery (COD)
                                            </label>
                                        </div>
                                        <button class="btn btn-sm btn-link" type="button" data-bs-toggle="collapse" data-bs-target="#codSettings">
                                            <i class="fas fa-cog"></i> Configure
                                        </button>
                                    </div>
                                    <div class="collapse" id="codSettings">
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <label for="codFee" class="form-label">Additional Fee</label>
                                                <div class="input-group">
                                                    <span class="input-group-text">$</span>
                                                    <input type="number" class="form-control" id="codFee" name="cod_fee" value="2.00" step="0.01">
                                                </div>
                                            </div>
                                            <div class="mb-3">
                                                <label for="codInstructions" class="form-label">Instructions for Customer</label>
                                                <textarea class="form-control" id="codInstructions" name="cod_instructions" rows="2">Please have the exact amount ready when the delivery arrives.</textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <button type="button" class="btn btn-primary" id="savePaymentSettingsBtn">
                                <i class="fas fa-save me-1"></i> Save Payment Settings
                            </button>
                        </form>
                    </div>
                    
                    <!-- Tax Settings -->
                    <div class="tab-pane fade" id="tax" role="tabpanel" aria-labelledby="tax-tab">
                        <h5 class="mb-4">Tax Settings</h5>
                        <form id="taxSettingsForm">
                            <div class="mb-3">
                                <label class="form-label">Tax Options</label>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="radio" name="tax_calculation" id="taxInclusive" value="inclusive">
                                    <label class="form-check-label" for="taxInclusive">
                                        Prices include tax
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="radio" name="tax_calculation" id="taxExclusive" value="exclusive" checked>
                                    <label class="form-check-label" for="taxExclusive">
                                        Prices exclude tax
                                    </label>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="defaultTaxRate" class="form-label">Default Tax Rate (%)</label>
                                <input type="number" class="form-control" id="defaultTaxRate" name="default_tax_rate" value="7.5" step="0.01" min="0" max="100">
                            </div>
                            
                            <div class="mb-4">
                                <label class="form-label">Tax Rates by Location</label>
                                <div class="table-responsive">
                                    <table class="table table-bordered table-sm" id="taxRatesTable">
                                        <thead>
                                            <tr>
                                                <th>Country</th>
                                                <th>State/Province</th>
                                                <th>Tax Rate (%)</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>United States</td>
                                                <td>California</td>
                                                <td>8.25</td>
                                                <td>
                                                    <button type="button" class="btn btn-sm btn-outline-primary edit-tax-rate-btn" data-rate-id="1">
                                                        <i class="fas fa-edit"></i>
                                                    </button>
                                                    <button type="button" class="btn btn-sm btn-outline-danger delete-tax-rate-btn" data-rate-id="1">
                                                        <i class="fas fa-trash-alt"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>United States</td>
                                                <td>New York</td>
                                                <td>8.875</td>
                                                <td>
                                                    <button type="button" class="btn btn-sm btn-outline-primary edit-tax-rate-btn" data-rate-id="2">
                                                        <i class="fas fa-edit"></i>
                                                    </button>
                                                    <button type="button" class="btn btn-sm btn-outline-danger delete-tax-rate-btn" data-rate-id="2">
                                                        <i class="fas fa-trash-alt"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <button type="button" class="btn btn-sm btn-success" id="addTaxRateBtn">
                                    <i class="fas fa-plus-circle me-1"></i> Add Tax Rate
                                </button>
                            </div>
                            
                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="taxShipping" name="tax_shipping">
                                    <label class="form-check-label" for="taxShipping">
                                        Apply tax to shipping
                                    </label>
                                </div>
                            </div>
                            
                            <button type="button" class="btn btn-primary" id="saveTaxSettingsBtn">
                                <i class="fas fa-save me-1"></i> Save Tax Settings
                            </button>
                        </form>
                    </div>
                    
                    <!-- Email Settings -->
                    <div class="tab-pane fade" id="email" role="tabpanel" aria-labelledby="email-tab">
                        <h5 class="mb-4">Email Settings</h5>
                        <form id="emailSettingsForm">
                            <div class="mb-4">
                                <h6 class="mb-3">SMTP Configuration</h6>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="smtpHost" class="form-label">SMTP Host</label>
                                        <input type="text" class="form-control" id="smtpHost" name="smtp_host" value="smtp.example.com">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="smtpPort" class="form-label">SMTP Port</label>
                                        <input type="number" class="form-control" id="smtpPort" name="smtp_port" value="587">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="smtpUsername" class="form-label">SMTP Username</label>
                                        <input type="text" class="form-control" id="smtpUsername" name="smtp_username" value="user@example.com">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="smtpPassword" class="form-label">SMTP Password</label>
                                        <input type="password" class="form-control" id="smtpPassword" name="smtp_password" value="password">
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="smtpSsl" name="smtp_ssl" checked>
                                        <label class="form-check-label" for="smtpSsl">
                                            Use SSL/TLS
                                        </label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <button type="button" class="btn btn-outline-primary" id="testEmailBtn">
                                        <i class="fas fa-paper-plane me-1"></i> Send Test Email
                                    </button>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <h6 class="mb-3">Email Templates</h6>
                                <div class="list-group">
                                    <button type="button" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center" data-bs-toggle="modal" data-bs-target="#emailTemplateModal" data-template="order_confirmation">
                                        Order Confirmation
                                        <i class="fas fa-angle-right"></i>
                                    </button>
                                    <button type="button" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center" data-bs-toggle="modal" data-bs-target="#emailTemplateModal" data-template="shipping_confirmation">
                                        Shipping Confirmation
                                        <i class="fas fa-angle-right"></i>
                                    </button>
                                    <button type="button" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center" data-bs-toggle="modal" data-bs-target="#emailTemplateModal" data-template="account_creation">
                                        Account Creation
                                        <i class="fas fa-angle-right"></i>
                                    </button>
                                    <button type="button" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center" data-bs-toggle="modal" data-bs-target="#emailTemplateModal" data-template="password_reset">
                                        Password Reset
                                        <i class="fas fa-angle-right"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <button type="button" class="btn btn-primary" id="saveEmailSettingsBtn">
                                <i class="fas fa-save me-1"></i> Save Email Settings
                            </button>
                        </form>
                    </div>
                    
                    <!-- Appearance Settings -->
                    <div class="tab-pane fade" id="appearance" role="tabpanel" aria-labelledby="appearance-tab">
                        <h5 class="mb-4">Appearance Settings</h5>
                        <form id="appearanceSettingsForm">
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <label class="form-label">Store Logo</label>
                                    <div class="card p-3 mb-3">
                                        <div class="text-center">
                                            <img src="https://via.placeholder.com/200x100?text=Store+Logo" alt="Store Logo" class="img-fluid mb-3" style="max-height: 100px;">
                                            <div>
                                                <button type="button" class="btn btn-sm btn-outline-primary">
                                                    <i class="fas fa-upload me-1"></i> Upload New Logo
                                                </button>
                                                <button type="button" class="btn btn-sm btn-outline-danger ms-2">
                                                    <i class="fas fa-trash-alt me-1"></i> Remove
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Favicon</label>
                                    <div class="card p-3 mb-3">
                                        <div class="text-center">
                                            <img src="https://via.placeholder.com/32x32?text=Icon" alt="Favicon" class="img-fluid mb-3" style="max-height: 32px;">
                                            <div>
                                                <button type="button" class="btn btn-sm btn-outline-primary">
                                                    <i class="fas fa-upload me-1"></i> Upload Favicon
                                                </button>
                                                <button type="button" class="btn btn-sm btn-outline-danger ms-2">
                                                    <i class="fas fa-trash-alt me-1"></i> Remove
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <h6 class="mb-3">Theme Colors</h6>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="primaryColor" class="form-label">Primary Color</label>
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <input type="color" class="form-control form-control-color p-0" id="primaryColorPicker" value="#0d6efd">
                                            </span>
                                            <input type="text" class="form-control" id="primaryColor" name="primary_color" value="#0d6efd">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="secondaryColor" class="form-label">Secondary Color</label>
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <input type="color" class="form-control form-control-color p-0" id="secondaryColorPicker" value="#6c757d">
                                            </span>
                                            <input type="text" class="form-control" id="secondaryColor" name="secondary_color" value="#6c757d">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="accentColor" class="form-label">Accent Color</label>
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <input type="color" class="form-control form-control-color p-0" id="accentColorPicker" value="#fd7e14">
                                            </span>
                                            <input type="text" class="form-control" id="accentColor" name="accent_color" value="#fd7e14">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="backgroundColor" class="form-label">Background Color</label>
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <input type="color" class="form-control form-control-color p-0" id="backgroundColorPicker" value="#f8f9fa">
                                            </span>
                                            <input type="text" class="form-control" id="backgroundColor" name="background_color" value="#f8f9fa">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <h6 class="mb-3">Homepage Layout</h6>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <div class="card">
                                            <div class="card-body p-2">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="homepage_layout" id="layoutDefault" value="default" checked>
                                                    <label class="form-check-label" for="layoutDefault">
                                                        Default Layout
                                                    </label>
                                                </div>
                                                <img src="https://via.placeholder.com/250x150?text=Default+Layout" alt="Default Layout" class="img-fluid mt-2">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card">
                                            <div class="card-body p-2">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="homepage_layout" id="layoutAlternative" value="alternative">
                                                    <label class="form-check-label" for="layoutAlternative">
                                                        Alternative Layout
                                                    </label>
                                                </div>
                                                <img src="https://via.placeholder.com/250x150?text=Alternative+Layout" alt="Alternative Layout" class="img-fluid mt-2">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <button type="button" class="btn btn-primary" id="saveAppearanceSettingsBtn">
                                <i class="fas fa-save me-1"></i> Save Appearance Settings
                            </button>
                        </form>
                    </div>
                    
                    <!-- Advanced Settings -->
                    <div class="tab-pane fade" id="advanced" role="tabpanel" aria-labelledby="advanced-tab">
                        <h5 class="mb-4">Advanced Settings</h5>
                        <form id="advancedSettingsForm">
                            <div class="mb-4">
                                <h6 class="mb-3">Cache Settings</h6>
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="enableCache" name="enable_cache" checked>
                                        <label class="form-check-label" for="enableCache">
                                            Enable Page Cache
                                        </label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="cacheExpiration" class="form-label">Cache Expiration (minutes)</label>
                                    <input type="number" class="form-control" id="cacheExpiration" name="cache_expiration" value="60" min="1">
                                </div>
                                <div class="mb-3">
                                    <button type="button" class="btn btn-outline-secondary" id="clearCacheBtn">
                                        <i class="fas fa-broom me-1"></i> Clear Cache
                                    </button>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <h6 class="mb-3">API Settings</h6>
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="enableApi" name="enable_api" checked>
                                        <label class="form-check-label" for="enableApi">
                                            Enable API Access
                                        </label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="apiKey" class="form-label">API Key</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="apiKey" name="api_key" value="sk_test_api_key_example" readonly>
                                        <button class="btn btn-outline-secondary" type="button" id="regenerateApiKeyBtn">
                                            <i class="fas fa-sync-alt"></i> Regenerate
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <h6 class="mb-3">Maintenance Mode</h6>
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="enableMaintenance" name="enable_maintenance">
                                        <label class="form-check-label" for="enableMaintenance">
                                            Enable Maintenance Mode
                                        </label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="maintenanceMessage" class="form-label">Maintenance Message</label>
                                    <textarea class="form-control" id="maintenanceMessage" name="maintenance_message" rows="3">We're currently updating our store to serve you better. Please check back soon.</textarea>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <h6 class="mb-3">Database Backup</h6>
                                <div class="mb-3">
                                    <button type="button" class="btn btn-outline-primary" id="backupDatabaseBtn">
                                        <i class="fas fa-database me-1"></i> Create Backup
                                    </button>
                                    <button type="button" class="btn btn-outline-secondary ms-2" id="viewBackupsBtn">
                                        <i class="fas fa-history me-1"></i> View Backups
                                    </button>
                                </div>
                            </div>
                            
                            <button type="button" class="btn btn-primary" id="saveAdvancedSettingsBtn">
                                <i class="fas fa-save me-1"></i> Save Advanced Settings
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Email Template Modal -->
<div class="modal fade" id="emailTemplateModal" tabindex="-1" aria-labelledby="emailTemplateModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="emailTemplateModalLabel">Edit Email Template</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label for="emailSubject" class="form-label">Email Subject</label>
                    <input type="text" class="form-control" id="emailSubject" name="email_subject" value="Your order has been confirmed">
                </div>
                <div class="mb-3">
                    <label for="emailTemplate" class="form-label">Email Template</label>
                    <textarea class="form-control" id="emailTemplate" name="email_template" rows="10">
<!DOCTYPE html>
<html>
<head>
    <title>Order Confirmation</title>
</head>
<body>
    <h1>Thank you for your order!</h1>
    <p>Dear {customer_name},</p>
    <p>Your order #{order_number} has been confirmed and is now being processed.</p>
    <p>Order Details:</p>
    <p>{order_details}</p>
    <p>Best regards,<br>{store_name} Team</p>
</body>
</html>
                    </textarea>
                </div>
                <div class="mb-3">
                    <label class="form-label">Available Variables:</label>
                    <div class="p-2 bg-light rounded border">
                        <code>{customer_name}</code>, <code>{order_number}</code>, <code>{order_details}</code>, <code>{store_name}</code>, <code>{total_amount}</code>, <code>{shipping_address}</code>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-primary me-auto" id="testEmailTemplateBtn">
                    <i class="fas fa-paper-plane me-1"></i> Send Test Email
                </button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveEmailTemplateBtn">Save Template</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Link color pickers to their text inputs
    function setupColorPickers() {
        const colorPairs = [
            { picker: 'primaryColorPicker', input: 'primaryColor' },
            { picker: 'secondaryColorPicker', input: 'secondaryColor' },
            { picker: 'accentColorPicker', input: 'accentColor' },
            { picker: 'backgroundColorPicker', input: 'backgroundColor' }
        ];
        
        colorPairs.forEach(pair => {
            const picker = document.getElementById(pair.picker);
            const input = document.getElementById(pair.input);
            
            picker.addEventListener('input', function() {
                input.value = this.value;
            });
            
            input.addEventListener('input', function() {
                if (this.value.startsWith('#') && (this.value.length === 4 || this.value.length === 7)) {
                    picker.value = this.value;
                }
            });
        });
    }
    
    // Initialize Settings
    function initSettings() {
        setupColorPickers();
        
        // Add event listeners for saving settings
        document.getElementById('saveGeneralSettingsBtn').addEventListener('click', function() {
            saveSettings('general');
        });
        
        document.getElementById('saveShippingSettingsBtn').addEventListener('click', function() {
            saveSettings('shipping');
        });
        
        document.getElementById('savePaymentSettingsBtn').addEventListener('click', function() {
            saveSettings('payment');
        });
        
        document.getElementById('saveTaxSettingsBtn').addEventListener('click', function() {
            saveSettings('tax');
        });
        
        document.getElementById('saveEmailSettingsBtn').addEventListener('click', function() {
            saveSettings('email');
        });
        
        document.getElementById('saveAppearanceSettingsBtn').addEventListener('click', function() {
            saveSettings('appearance');
        });
        
        document.getElementById('saveAdvancedSettingsBtn').addEventListener('click', function() {
            saveSettings('advanced');
        });
        
        // Test email button
        document.getElementById('testEmailBtn').addEventListener('click', function() {
            sendTestEmail();
        });
        
        // Clear cache button
        document.getElementById('clearCacheBtn').addEventListener('click', function() {
            clearCache();
        });
        
        // Regenerate API key button
        document.getElementById('regenerateApiKeyBtn').addEventListener('click', function() {
            regenerateApiKey();
        });
        
        // Database backup button
        document.getElementById('backupDatabaseBtn').addEventListener('click', function() {
            createDatabaseBackup();
        });
        
        // Set up Email Template Modal
        setupEmailTemplateModal();
    }
    
    // Email Template Modal Setup
    function setupEmailTemplateModal() {
        const emailTemplateModal = document.getElementById('emailTemplateModal');
        
        emailTemplateModal.addEventListener('show.bs.modal', function(event) {
            const button = event.relatedTarget;
            const templateType = button.getAttribute('data-template');
            
            // Load template data based on templateType
            loadEmailTemplate(templateType);
        });
        
        document.getElementById('saveEmailTemplateBtn').addEventListener('click', function() {
            saveEmailTemplate();
        });
        
        document.getElementById('testEmailTemplateBtn').addEventListener('click', function() {
            sendTestTemplateEmail();
        });
    }
    
    // Mock functions for API interactions
    function saveSettings(settingType) {
        const form = document.getElementById(`${settingType}SettingsForm`);
        const formData = new FormData(form);
        
        // Convert FormData to object
        const settings = {};
        for (const [key, value] of formData.entries()) {
            settings[key] = value;
        }
        
        // Mock API call
        console.log(`Saving ${settingType} settings:`, settings);
        
        // Show success message
        showAlert(`${settingType.charAt(0).toUpperCase() + settingType.slice(1)} settings saved successfully!`, 'success');
    }
    
    function loadEmailTemplate(templateType) {
        // Mock loading template data
        let subject = '';
        let template = '';
        
        switch (templateType) {
            case 'order_confirmation':
                subject = 'Your order has been confirmed';
                template = `<!DOCTYPE html>
<html>
<head>
    <title>Order Confirmation</title>
</head>
<body>
    <h1>Thank you for your order!</h1>
    <p>Dear {customer_name},</p>
    <p>Your order #{order_number} has been confirmed and is now being processed.</p>
    <p>Order Details:</p>
    <p>{order_details}</p>
    <p>Best regards,<br>{store_name} Team</p>
</body>
</html>`;
                break;
            case 'shipping_confirmation':
                subject = 'Your order has been shipped';
                template = `<!DOCTYPE html>
<html>
<head>
    <title>Shipping Confirmation</title>
</head>
<body>
    <h1>Your order has been shipped!</h1>
    <p>Dear {customer_name},</p>
    <p>Your order #{order_number} has been shipped and is on its way to you.</p>
    <p>Shipping Details:</p>
    <p>Tracking Number: {tracking_number}</p>
    <p>Best regards,<br>{store_name} Team</p>
</body>
</html>`;
                break;
            case 'account_creation':
                subject = 'Welcome to {store_name}';
                template = `<!DOCTYPE html>
<html>
<head>
    <title>Welcome to Our Store</title>
</head>
<body>
    <h1>Welcome to {store_name}!</h1>
    <p>Dear {customer_name},</p>
    <p>Thank you for creating an account with us. Your account has been successfully created.</p>
    <p>Best regards,<br>{store_name} Team</p>
</body>
</html>`;
                break;
            case 'password_reset':
                subject = 'Password Reset Request';
                template = `<!DOCTYPE html>
<html>
<head>
    <title>Password Reset</title>
</head>
<body>
    <h1>Password Reset Request</h1>
    <p>Dear {customer_name},</p>
    <p>We received a request to reset your password. Please click the link below to reset your password:</p>
    <p><a href="{reset_link}">Reset Password</a></p>
    <p>If you did not request this, please ignore this email.</p>
    <p>Best regards,<br>{store_name} Team</p>
</body>
</html>`;
                break;
        }
        
        // Update modal title
        document.getElementById('emailTemplateModalLabel').textContent = `Edit ${templateType.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase())} Template`;
        
        // Set form values
        document.getElementById('emailSubject').value = subject;
        document.getElementById('emailTemplate').value = template;
    }
    
    function saveEmailTemplate() {
        const subject = document.getElementById('emailSubject').value;
        const template = document.getElementById('emailTemplate').value;
        
        // Mock API call
        console.log('Saving email template:', { subject, template });
        
        // Close modal
        const modal = bootstrap.Modal.getInstance(document.getElementById('emailTemplateModal'));
        modal.hide();
        
        // Show success message
        showAlert('Email template saved successfully!', 'success');
    }
    
    function sendTestEmail() {
        // Mock API call
        console.log('Sending test email with SMTP configuration...');
        
        // Show success message
        showAlert('Test email sent successfully! Please check your inbox.', 'success');
    }
    
    function sendTestTemplateEmail() {
        // Mock API call
        console.log('Sending test email with current template...');
        
        // Show success message
        showAlert('Test email sent successfully! Please check your inbox.', 'success');
    }
    
    function clearCache() {
        // Mock API call
        console.log('Clearing application cache...');
        
        // Show success message
        showAlert('Cache cleared successfully!', 'success');
    }
    
    function regenerateApiKey() {
        // Mock API call to generate new key
        const newApiKey = 'sk_' + Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
        
        // Update input field
        document.getElementById('apiKey').value = newApiKey;
        
        // Show success message
        showAlert('API key regenerated successfully!', 'success');
    }
    
    function createDatabaseBackup() {
        // Mock API call
        console.log('Creating database backup...');
        
        // Show success message
        showAlert('Database backup created successfully!', 'success');
    }
    
    // Helper function to show alert messages
    function showAlert(message, type) {
        // Create alert element
        const alertDiv = document.createElement('div');
        alertDiv.className = `alert alert-${type} alert-dismissible fade show`;
        alertDiv.innerHTML = `
            ${message}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        `;
        
        // Insert at the top of the content area
        const tabContent = document.querySelector('.tab-content');
        tabContent.insertBefore(alertDiv, tabContent.firstChild);
        
        // Auto dismiss after 5 seconds
        setTimeout(() => {
            if (alertDiv.parentNode) {
                const bsAlert = bootstrap.Alert.getOrCreateInstance(alertDiv);
                bsAlert.close();
            }
        }, 5000);
    }
    
    // Initialize settings on page load
    initSettings();
});
</script>
{% endblock %}