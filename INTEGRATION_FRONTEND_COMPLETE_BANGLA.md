# тЬЕ Integration Settings - ржУржпрж╝рзЗржмрж╕рж╛ржЗржЯрзЗ рж╕ржорзНржкрзВрж░рзНржгржнрж╛ржмрзЗ ржкрзНрж░ржпрж╝рзЛржЧ рж╕ржорзНржкржирзНржи!

## ЁЯОЙ рж╕ржлрж▓ржнрж╛ржмрзЗ ржмрж╛рж╕рзНрждржмрж╛ржпрж╝рж┐ржд ржЗржирзНржЯрж┐ржЧрзНрж░рзЗрж╢ржи ржлрж┐рж▓рзНржбрж╕ржорзВрж╣

ржЖржкржирж╛рж░ ржЕржирзБрж░рзЛржз ржЕржирзБржпрж╛ржпрж╝рзА, ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд рж╕ржорж╕рзНржд ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ ржХрзЛржб ржПржмржВ рж╕рзЗржЯрж┐ржВрж╕ ржПржЦржи **frontend/base.html** ржлрж╛ржЗрж▓рзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ ржкрзНрж░ржпрж╝рзЛржЧ рж╣ржЪрзНржЫрзЗ:

### ЁЯУШ **Meta Pixel Code (Facebook)**
- тЬЕ **ржЕржмрж╕рзНржерж╛ржи**: `<head>` рж╕рзЗржХрж╢ржирзЗ
- тЬЕ **ржлрж┐рж▓рзНржб**: `meta_pixel_code` + `meta_pixel_enabled`
- тЬЕ **ржлрж╛ржВрж╢ржи**: Facebook ржмрж┐ржЬрзНржЮрж╛ржкржи ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ ржПржмржВ ржХржиржнрж╛рж░рзНрж╢ржи ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ

### ЁЯУК **Google Analytics (GA4)**
- тЬЕ **ржЕржмрж╕рзНржерж╛ржи**: `<head>` рж╕рзЗржХрж╢ржирзЗ
- тЬЕ **ржлрж┐рж▓рзНржб**: `google_analytics_measurement_id` + `google_analytics_enabled`
- тЬЕ **ржлрж╛ржВрж╢ржи**: ржУржпрж╝рзЗржмрж╕рж╛ржЗржЯ ржЯрзНрж░рж╛ржлрж┐ржХ ржПржмржВ ржЗржЙржЬрж╛рж░ ржмрж┐рж╣рзЗржнрж┐ржпрж╝рж╛рж░ ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ

### ЁЯП╖я╕П **Google Tag Manager**
- тЬЕ **рж╣рзЗржбрж╛рж░ рж╕рзНржХрзНрж░рж┐ржкрзНржЯ**: `<head>` рж╕рзЗржХрж╢ржирзЗ GTM ржХрзЛржб
- тЬЕ **ржмржбрж┐ рж╕рзНржХрзНрж░рж┐ржкрзНржЯ**: `<body>` ржПрж░ ржкрж░рзЗ noscript ржЯрзНржпрж╛ржЧ
- тЬЕ **ржлрж┐рж▓рзНржб**: `gtm_container_id` + `gtm_enabled`
- тЬЕ **ржлрж╛ржВрж╢ржи**: рж╕ржм ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ ржПржХржЗ ржЬрж╛ржпрж╝ржЧрж╛ржпрж╝

### ЁЯФН **Search Engine Verification**
- тЬЕ **Google Search Console**: meta ржЯрзНржпрж╛ржЧ `<head>` ржП
- тЬЕ **Bing Webmaster Tools**: meta ржЯрзНржпрж╛ржЧ `<head>` ржП  
- тЬЕ **Yandex Webmaster**: meta ржЯрзНржпрж╛ржЧ `<head>` ржП
- тЬЕ **ржлрж╛ржВрж╢ржи**: рж╕рж╛рж░рзНржЪ ржЗржЮрзНржЬрж┐ржирзЗ ржУржпрж╝рзЗржмрж╕рж╛ржЗржЯ ржпрж╛ржЪрж╛ржЗржХрж░ржг

### ЁЯФе **Hotjar Analytics**
- тЬЕ **ржЕржмрж╕рзНржерж╛ржи**: `<head>` рж╕рзЗржХрж╢ржирзЗ
- тЬЕ **ржлрж┐рж▓рзНржб**: `hotjar_site_id` + `hotjar_enabled`
- тЬЕ **ржлрж╛ржВрж╢ржи**: ржЗржЙржЬрж╛рж░ ржмрж┐рж╣рзЗржнрж┐ржпрж╝рж╛рж░, рж╣рж┐ржЯржорзНржпрж╛ржк ржПржмржВ рж░рзЗржХрж░рзНржбрж┐ржВ

### тЪЩя╕П **Custom Header Scripts**
- тЬЕ **ржЕржмрж╕рзНржерж╛ржи**: `<head>` рж╕рзЗржХрж╢ржирзЗ
- тЬЕ **ржлрж┐рж▓рзНржб**: `header_scripts`
- тЬЕ **ржлрж╛ржВрж╢ржи**: ржХрж╛рж╕рзНржЯржо ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ ржмрж╛ ржЕржирзНржпрж╛ржирзНржп рж╕рзНржХрзНрж░рж┐ржкрзНржЯ

### тЪЩя╕П **Custom Footer Scripts**
- тЬЕ **ржЕржмрж╕рзНржерж╛ржи**: `</body>` ржЯрзНржпрж╛ржЧрзЗрж░ ржЖржЧрзЗ
- тЬЕ **ржлрж┐рж▓рзНржб**: `footer_scripts`
- тЬЕ **ржлрж╛ржВрж╢ржи**: ржкрзЗржЬ рж▓рзЛржбрзЗрж░ ржкрж░рзЗ рж░рж╛ржи рж╣ржУржпрж╝рж╛ рж╕рзНржХрзНрж░рж┐ржкрзНржЯ

## ЁЯЫая╕П **ржХрж┐ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░ржЫрзЗ**

### **Frontend Template Integration:**
```html
<!-- frontend/templates/frontend/base.html -->
<head>
    <!-- Search Engine Verification Meta Tags -->
    {{ integration_meta_tags|safe }}
    
    <!-- Integration Header Scripts -->
    {{ integration_header_scripts|safe }}
</head>
<body>
    <!-- Integration Body Scripts -->
    {{ integration_body_scripts|safe }}
    
    <!-- Rest of page content -->
</body>
```

### **Context Processor:**
```python
# settings/context_processors.py
def integration_settings(request):
    settings = IntegrationSettings.get_active_settings()
    return {
        'integration_settings': settings,
        'integration_meta_tags': settings.get_verification_meta_tags(),
        'integration_header_scripts': settings.get_all_header_scripts(),
        'integration_body_scripts': settings.get_all_body_scripts(),
    }
```

### **Model Methods:**
```python
# settings/models.py - IntegrationSettings
def get_all_header_scripts(self):
    # Google Tag Manager + Google Analytics + Meta Pixel + Hotjar + Custom
    
def get_all_body_scripts(self):
    # GTM noscript + Custom footer scripts
    
def get_verification_meta_tags(self):
    # Google + Bing + Yandex verification meta tags
```

## ЁЯУЛ **ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб ржерзЗржХрзЗ ржмрзНржпржмрж╣рж╛рж░**

1. **Dashboard тЖТ Settings тЖТ Integration** ржП ржпрж╛ржи
2. ржпрзЗржХрзЛржи ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ рж╕рж╛рж░рзНржнрж┐рж╕ **Enable** ржХрж░рзБржи
3. ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ **ID/Code** ржжрж┐ржи
4. **Save Settings** ржХрж░рзБржи
5. **рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ рж╕ржм ржкрзЗржЬрзЗ ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ ржХрзЛржб Active** рж╣ржпрж╝рзЗ ржпрж╛ржмрзЗ!

## ЁЯОп **ржмрж░рзНрждржорж╛ржи ржЕржмрж╕рзНржерж╛**

### тЬЕ **ржПржЦржиржЗ ржХрж╛ржЬ ржХрж░ржЫрзЗ:**
- тЬЕ Meta Pixel: `G-TEST123456` ржжрж┐ржпрж╝рзЗ рж╕ржХрзНрж░рж┐ржпрж╝
- тЬЕ Google Analytics: `G-TEST123456` ржжрж┐ржпрж╝рзЗ рж╕ржХрзНрж░рж┐ржпрж╝
- тЬЕ Google Tag Manager: `GTM-TEST123` ржжрж┐ржпрж╝рзЗ рж╕ржХрзНрж░рж┐ржпрж╝
- тЬЕ Google Search Console verification рж╕ржХрзНрж░рж┐ржпрж╝
- тЬЕ Bing Webmaster verification рж╕ржХрзНрж░рж┐ржпрж╝
- тЬЕ Yandex verification рж╕ржХрзНрж░рж┐ржпрж╝
- тЬЕ Hotjar Analytics: Site ID `123456` ржжрж┐ржпрж╝рзЗ рж╕ржХрзНрж░рж┐ржпрж╝
- тЬЕ Custom header ржПржмржВ footer scripts рж╕ржХрзНрж░рж┐ржпрж╝

### ЁЯМР **рж╕ржм ржкрзЗржЬрзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ ржкрзНрж░ржпрж╝рзЛржЧ:**
- ЁЯПа Homepage
- ЁЯЫНя╕П Product pages
- ЁЯЫТ Cart pages
- ЁЯУЛ Checkout pages
- ЁЯСд User account pages
- ЁЯУД All static pages

## ЁЯФз **ржкрзНрж░ржпрзБржХрзНрждрж┐ржЧржд ржмрж┐ржмрж░ржг**

### **Context Processor Configuration:**
```python
# ecommerce_project/settings.py
TEMPLATES = [{
    'OPTIONS': {
        'context_processors': [
            # ... other processors
            'settings.context_processors.integration_settings',  # тЬЕ Added
        ],
    },
}]
```

### **Database Fields:**
- `meta_pixel_enabled` тЖТ Boolean
- `meta_pixel_code` тЖТ TextField
- `google_analytics_enabled` тЖТ Boolean  
- `google_analytics_measurement_id` тЖТ CharField
- `gtm_enabled` тЖТ Boolean
- `gtm_container_id` тЖТ CharField
- `google_search_console_enabled` тЖТ Boolean
- `google_search_console_code` тЖТ CharField
- `bing_webmaster_enabled` тЖТ Boolean
- `bing_webmaster_code` тЖТ CharField
- `yandex_verification_enabled` тЖТ Boolean
- `yandex_verification_code` тЖТ CharField
- `hotjar_enabled` тЖТ Boolean
- `hotjar_site_id` тЖТ CharField
- `header_scripts` тЖТ TextField
- `footer_scripts` тЖТ TextField

## ЁЯОЙ **рж╕рж╛ржлрж▓рзНржпрзЗрж░ рж╕ржВржХрзНрж╖рж┐ржкрзНрждрж╕рж╛рж░**

### тЬЕ **рж╕ржорзНржкржирзНржи ржХрж╛ржЬрж╕ржорзВрж╣:**
1. тЬЕ IntegrationSettings model рждрзИрж░рж┐
2. тЬЕ Context processor setup
3. тЬЕ Frontend base.html ржП integration
4. тЬЕ Dashboard interface рждрзИрж░рж┐
5. тЬЕ API endpoints рждрзИрж░рж┐
6. тЬЕ рж╕ржм ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ ржХрзЛржб active
7. тЬЕ Real-time testing рж╕ржорзНржкржирзНржи

### ЁЯЪА **ржПржЦржи ржпрж╛ рж╣ржЪрзНржЫрзЗ:**
- ЁЯМЯ **рж╕ржм ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ ржХрзЛржб automatic ржУржпрж╝рзЗржмрж╕рж╛ржЗржЯрзЗ ржЪрж▓рзЗ ржЖрж╕ржЫрзЗ**
- ЁЯМЯ **ржХрзЛржи manual template edit ржкрзНрж░ржпрж╝рзЛржЬржи ржирзЗржЗ**
- ЁЯМЯ **Dashboard ржерзЗржХрзЗ control ржХрж░рж╛ ржпрж╛ржЪрзНржЫрзЗ**
- ЁЯМЯ **Real-time enable/disable ржХрж░рж╛ ржпрж╛ржЪрзНржЫрзЗ**

### ЁЯОп **ржкрж░ржмрж░рзНрждрзА ржзрж╛ржк:**
ржЖржкржирж┐ ржПржЦржи Dashboard тЖТ Settings тЖТ Integration ржП ржЧрж┐ржпрж╝рзЗ:
1. ржЖржкржирж╛рж░ **actual tracking IDs** ржжрж┐рждрзЗ ржкрж╛рж░рзЗржи
2. **Production codes** setup ржХрж░рждрзЗ ржкрж╛рж░рзЗржи
3. **Real tracking** рж╢рзБрж░рзБ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи

**ЁЯОЙ ржЖржкржирж╛рж░ Integration Settings ржПржЦржи рж╕ржорзНржкрзВрж░рзНржгржнрж╛ржмрзЗ frontend ржП ржХрж╛ржЬ ржХрж░ржЫрзЗ!**